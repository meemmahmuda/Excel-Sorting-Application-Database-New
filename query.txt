<!-- -- Users table
CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Files table
CREATE TABLE files (
    id INT AUTO_INCREMENT PRIMARY KEY,
    filename VARCHAR(255) NOT NULL,
    file_data LONGBLOB NOT NULL,
    type ENUM('uploaded','unmatched') DEFAULT 'uploaded',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
); -->


<!-- -- Users table
CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Files table (with relation to users)
CREATE TABLE files (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    filename VARCHAR(255) NOT NULL,
    file_data LONGBLOB NOT NULL,
    type ENUM('uploaded','unmatched') DEFAULT 'uploaded',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
); -->




-- Users table with role added
CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,
    is_approved TINYINT(1) NOT NULL DEFAULT 0,      -- 0 = Not approved, 1 = Approved
    role ENUM('user','admin') NOT NULL DEFAULT 'user', -- role of the user
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Files table (unchanged)
CREATE TABLE files (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    filename VARCHAR(255) NOT NULL,
    file_data LONGBLOB NOT NULL,
    type ENUM('uploaded','unmatched') DEFAULT 'uploaded',
    bank_name VARCHAR(100) NOT NULL,       -- bank or portal name
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);











upload_max_filesize = 256M
post_max_size = 256M
memory_limit = 2048M
max_execution_time = 600


max_allowed_packet=512M
wait_timeout=28800






# PHP configuration overrides
php_value upload_max_filesize 256M
php_value post_max_size 256M
php_value memory_limit 2048M
php_value max_execution_time 600
